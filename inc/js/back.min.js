jQuery(document).ready((function(e){function t(){let t=[];e(".rjs_menuSection").each((function(s){let o=[];e(this).find(".rjs_item").each((function(){let t=e(this).attr("data-type");if("food"===t){let t=e(this).attr("data-food-id");o.push({type:"food",id:t})}if("heading"===t){let t=e(this).find("span").html();o.push({type:"heading",content:t})}if("paragraph"===t){let t=e(this).find("span").html();o.push({type:"paragraph",content:t})}})),t.push(o)})),e(".rjs_dataDump").val(JSON.stringify(t)),s()}function s(){e(this).hasClass("r_bg-amber-200")||(e(".rjs_saveData").removeClass("r_bg-gray-100").addClass("r_bg-amber-200").addClass("hover:r_opacity-80").addClass("r_cursor-pointer"),e(".rjs_saveData").find("span").removeClass("r_text-gray-400").addClass("r_text-gray-600").addClass("r_animate-pulse"))}let o;function r(t,r){o[t]=r,e(".rjs_settingsDump").val(JSON.stringify(o)),s()}function a(){e(".rjs_menuSection").length>0?e(".rjs_sectionNotice").hide():e(".rjs_sectionNotice").show()}var n,i,d,l;function _(t){e(".rjs_foodItemList .rjs_item[data-food-id="+t+"]").draggable("option","disabled",!1).removeClass("r_text-gray-400")}e(".rjs_uploadFoodImageButton").click((function(){return formfield=e(".rjs_ImageUrl").attr("name"),tb_show("","media-upload.php?type=image&amp;TB_iframe=true"),window.send_to_editor=function(t){imgurl=e(t).attr("src"),e(".rjs_ImageUrl").val(imgurl),e(".rjs_ImageUrlArea").css({"background-image":"url("+imgurl+")"}),e(".rjs_ImageUrlArea .rjs_uploadFoodImageButton").hide(),e(".rjs_ImageUrlArea .rjs_removeFoodImageButton").show(),tb_remove()},!1})),e(".rjs_removeFoodImageButton").click((function(){return e(".rjs_ImageUrl").val(""),e(".rjs_ImageUrlArea").css({"background-image":"none"}),e(".rjs_ImageUrlArea .rjs_uploadFoodImageButton").show(),e(".rjs_ImageUrlArea .rjs_removeFoodImageButton").hide(),!1})),e(".rjs_saveData").click((function(){e(this).hasClass("r_bg-amber-200")&&e("#post").submit()})),function(){if(0==e(".rjs_settingsDump").val().length){let t={layout:2,sh_food_images:"yes",food_image_shape:"rounded",food_image_size:"normal"};e(".rjs_settingsDump").val(JSON.stringify(t)),o=t}else o=JSON.parse(e(".rjs_settingsDump").val())}(),e(".rjs_toggleSidebar").click((function(){e(".rjs_sidebar").toggleClass("re_closedSidebar"),e(".rjs_editorBody").toggleClass("r_border-gray-200 r_border-r-0 r_border-y-0 r_border-l-4 r_border-dashed"),e(this).find("span").toggleClass("dashicons-editor-outdent").toggleClass("dashicons-editor-indent")})),e("body").on("click",".rjs_menuSectionDelete",(function(){let s=e(this).closest(".rjs_menuSection");s.find(".rjs_item").each((function(){if("food"===e(this).attr("data-type")){_(e(this).attr("data-food-id"))}e(this).remove()})),s.remove(),t(),a()})),e("body").on("click",".rjs_menuSectionAdd",(function(){e(".rjs_menuSectionEmpty").clone(!1).removeClass("rjs_menuSectionEmpty r_hidden").addClass("rjs_menuSection r_block").appendTo(".rjs_menuSections"),m(),t(),a()})),e(".rjs_foodSearch").keypress((function(e){13===e.keyCode&&e.preventDefault()})),e(".rjs_foodSearch").keyup((n=function(t){let s=e(this).val().toLowerCase();e(".rjs_foodItemList .rjs_item").each((function(){-1===e(this).text().toLowerCase().indexOf(s)?e(this).hide():e(this).show()}))},i=400,function(){var e=this,t=arguments,s=d&&!l;clearTimeout(l),l=setTimeout((function(){l=null,d||n.apply(e,t)}),i),s&&n.apply(e,t)})),e("body").on("click",".rjs_removeItem",(function(){if("food"===e(this).parent().attr("data-type")){_(e(this).parent().attr("data-food-id"))}e(this).parent().remove(),t()}));let c=!1;function p(e){if(!1===c){c=!0;let t=e,s=t.attr("data-type"),o=t.find(".rjs_itemTextContent");if("heading"===s){let e=o.html();o.html('<input class="re_item-text-input rjs_itemTextInput r_absolute r_inset-0 r_bg-white" type="text" value="'+e+'" />'),t.find(".rjs_removeItem").hide(),t.find(".rjs_editItemText").hide(),t.find(".rjs_saveItemText").show(),t.find("input").focus()}else if("paragraph"===s){let e=o.html();o.html('<textarea class="re_item-text-input rjs_itemTextInput r_relative r_z-80 r_w-full r_resize-none r_h-[100px] r_absolute r_inset-0 r_bg-white" type="text">'+e+"</textarea>"),t.find(".rjs_removeItem").hide(),t.find(".rjs_editItemText").hide(),t.find(".rjs_saveItemText").show(),t.find("textarea").focus()}}}function m(){e(".rjs_menuSection").sortable({items:".rjs_item",connectWith:".rjs_menuSection",tolerance:"pointer",receive:function(s,o){let r=e(o.sender);if(!r.hasClass("rjs_menuSection")){let t=e(o.helper[0]).attr("data-type");"food"===t&&(r.draggable("option","disabled",!0).addClass("r_text-gray-400"),e(o.helper[0]).append('<span class="rjs_removeItem re_remove-food-item r_cursor-pointer hover:r_opacity-70" style="position: absolute; top:2px; right:2px;"><span class="dashicons dashicons-no-alt"></span></span>')),"heading"!==t&&"paragraph"!==t||(e(o.helper[0]).append('<span class="rjs_saveItemText re_save-item-text r_cursor-pointer hover:r_opacity-70" style="display: none; position: absolute; top:4px; right:4px;"><span class="dashicons dashicons-saved"></span></span>'),e(o.helper[0]).append('<span class="rjs_removeItem re_remove-misc-item r_cursor-pointer hover:r_opacity-70" style="position: absolute; top:4px; right:2px;"><span class="dashicons dashicons-no-alt"></span></span>'),e(o.helper[0]).append('<span class="rjs_editItemText re_edit-item-text r_cursor-pointer hover:r_opacity-70" style="position: absolute; top:4px; right:20px;"><span class="dashicons dashicons-edit"></span></span>'))}t()},stop:function(e,s){t()}})}function u(){e("html").css("overflow","auto"),e(".rjs_menuEditor").removeClass("re_fullscreen-editor"),e(".rjs_backdrop").addClass("r_hidden"),e(".rjs_enterFullScreen").addClass("r_flex").removeClass("r_hidden"),e(".rjs_exitFullScreen").addClass("r_hidden").removeClass("r_flex")}e("body").on("click",".rjs_editItemText",(function(){p(e(this).parent())})),e("body").on("dblclick",'.rjs_menuSection [data-type="heading"], .rjs_menuSection [data-type="paragraph"]',(function(){c||p(e(this))})),e("body").on("click",".rjs_saveItemText",(function(){let s=e(this).parent(),o=s.attr("data-type"),r=s.find(".rjs_itemTextContent");"heading"===o?(userInput=r.find("input").val(),r.html(userInput),s.find(".rjs_removeItem").show(),s.find(".rjs_editItemText").show(),s.find(".rjs_saveItemText").hide()):"paragraph"===o&&(userInput=r.find("textarea").val(),r.html(userInput),s.find(".rjs_removeItem").show(),s.find(".rjs_editItemText").show(),s.find(".rjs_saveItemText").hide()),t(),c=!1})),e("body").on("keypress",".rjs_itemTextInput",(function(t){13===t.keyCode&&(t.preventDefault(),e(this).closest(".rjs_item").find(".rjs_saveItemText").click())})),e("body").on("focusout",".rjs_itemTextInput",(function(){e(this).closest(".rjs_item").find(".rjs_saveItemText").click()})),e(".rjs_menuSections").sortable({handle:".rjs_menuSectionHandle",tolerance:"pointer",stop:function(e,s){t()}}),e(".rjs_item").draggable({helper:"clone",connectToSortable:".rjs_menuSection"}),function(){let t=o.layout;e(".rjs_menuSections").addClass("r_grid-cols-"+t)}(),e("body").on("click",".rjs_menuSectionLayout",(function(){let t=o.layout;1===t?(t=2,e(".rjs_menuSections").removeClass("r_grid-cols-1").addClass("r_grid-cols-2"),r("layout",2)):2===t?(t=3,e(".rjs_menuSections").removeClass("r_grid-cols-2").addClass("r_grid-cols-3"),r("layout",3)):(t=1,e(".rjs_menuSections").removeClass("r_grid-cols-3").addClass("r_grid-cols-1"),r("layout",1))})),function(){let t=o.sh_food_images;e(".rjs_shFoodImages").val(t)}(),e("body").on("change",".rjs_shFoodImages",(function(){r("sh_food_images",e(".rjs_shFoodImages").val())})),function(){let t=o.food_image_shape;e(".rjs_foodImageShape").val(t)}(),e("body").on("change",".rjs_foodImageShape",(function(){r("food_image_shape",e(".rjs_foodImageShape").val())})),function(){let t=o.food_image_size;e(".rjs_foodImageSize").val(t)}(),e("body").on("change",".rjs_foodImageSize",(function(){r("food_image_size",e(".rjs_foodImageSize").val())})),e("body").on("click",".rjs_enterFullScreen",(function(){e("html").css("overflow","hidden"),e(".rjs_menuEditor").addClass("re_fullscreen-editor"),e(".rjs_backdrop").removeClass("r_hidden"),e(".rjs_exitFullScreen").removeClass("r_hidden").addClass("r_flex"),e(".rjs_enterFullScreen").addClass("r_hidden").removeClass("r_flex")})),e("body").on("click",".rjs_exitFullScreen",u),e(document).keyup((function(e){27===e.keyCode&&u()})),function(){let t=JSON.parse(e(".rjs_dataDump").val());for(let o=0;o<t.length;o++){let r=e(".rjs_menuSectionEmpty").clone(!1).removeClass("rjs_menuSectionEmpty r_hidden").addClass("rjs_menuSection r_block").appendTo(".rjs_menuSections");for(let a=0;a<t[o].length;a++)item=t[o][a],"food"===item.type&&(e(".rjs_foodItemList .rjs_item[data-food-id="+item.id+"]").clone(!1).appendTo(r).append('<span class="rjs_removeItem re_remove-food-item r_cursor-pointer hover:r_opacity-70" style="position: absolute; top:4px; right:2px;"><span class="dashicons dashicons-no-alt"></span></span>'),s=item.id,e(".rjs_foodItemList .rjs_item[data-food-id="+s+"]").draggable("option","disabled",!0).addClass("r_text-gray-400")),"heading"!==item.type&&"paragraph"!==item.type||e('.rjs_miscItemList .rjs_item[data-type="'+item.type+'"]').clone(!1).appendTo(r).append('<span class="rjs_saveItemText re_save-item-text r_cursor-pointer hover:r_opacity-70" style="display: none; position: absolute; top:4px; right:4px;"><span class="dashicons dashicons-saved"></span></span>').append('<span class="rjs_removeItem re_remove-misc-item r_cursor-pointer hover:r_opacity-70" style="position: absolute; top:4px; right:2px;"><span class="dashicons dashicons-no-alt"></span></span>').append('<span class="rjs_editItemText re_edit-item-text r_cursor-pointer hover:r_opacity-70" style="position: absolute; top:4px; right:20px;"><span class="dashicons dashicons-edit"></span></span>').find(".rjs_itemTextContent").html(item.content)}var s;m(),a()}()}));